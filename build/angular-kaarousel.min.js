!function(){"use strict";function e(){var e={restrict:"EA",scope:{displayed:"=?",perSlide:"=?",autoplay:"=?",direction:"=?",pauseOnHover:"=?",centerActive:"=?",timeInterval:"=?",transitionDuration:"=?",updateRate:"=?",stopAfterAction:"=?",hideNav:"=?",hidePager:"=?",navOnHover:"=?",pagerOnHover:"=?",swipable:"=?",sync:"=?",data:"=?",animation:"=?",loop:"=?",options:"=?",afterSlide:"&?",beforeSlide:"&?",minWidth:"=?",expand:"=?"},templateUrl:"app/components/kaarousel/templates/angular-kaarousel.html",transclude:!0,controller:n,controllerAs:"kc"};return e}function n(e,n,i,t,a,o,s){function r(){d(),u(),h(),w(),b(),B.ready=!0}function l(){return B.slides?new Array(Math.ceil(B.slides.length/B.options.perSlide)):void 0}function d(){B.kaarousel=n[0],B.kaarousel.classList.add("kaarousel"),B.kaarouselSliderContainer=n[0].querySelector("kaarousel-slider-container"),B.kaarouselWrapper=n[0].querySelector("kaarousel-wrapper"),B.kaarouselSlider=n[0].querySelector("kaarousel-slider")}function u(){B.kaarousel.classList.add("kaarousel")}function p(){var n;return _.isEmpty(e.options)?(n={displayed:e.displayed,perSlide:e.perSlide,autoplay:e.autoplay,direction:e.direction,pauseOnHover:e.pauseOnHover,centerActive:e.centerActive,timeInterval:e.timeInterval,transitionDuration:e.transitionDuration,updateRate:e.updateRate,stopAfterAction:e.stopAfterAction,hideNav:e.hideNav,hidePager:e.hidePager,navOnHover:e.navOnHover,pagerOnHover:e.pagerOnHover,swipable:e.swipable,sync:e.sync,animation:e.animation,loop:e.loop,options:e.options,afterSlide:e.afterSlide,beforeSlide:e.beforeSlide,minWidth:e.minWidth,expand:e.expand||!0},n=c(n)):(n=angular.copy(e.options),n.afterSlide=e.afterSlide,n.beforeSlide=e.beforeSlide,n)}function c(e){return _.forEach(e,function(n,t){-1!==F.indexOf(t)&&i.hasOwnProperty(t)&&angular.isUndefined(n)&&(e[t]=!0)}),e}function v(e){_.forEach(G,function(e){B.kaarouselSlider.classList.remove(e+"-animation")}),B.kaarouselSlider.classList.add(e+"-animation"),_.forEach(B.slides,function(n){n.element.css({"transition-duration":"slide"===e?"":B.options.transitionDuration/1e3+"s"})})}function f(e,n){var i;switch(e){case"animation":v(n);break;case"direction":m();break;case"autoplay":i=n?"play":"stop",B[i]();break;case"swipable":Y(n);break;case"loop":n&&!B.isPlaying&&B.options.autoplay&&R();break;case"transitionDuration":U();break;case"sync":g(n);break;case"centerActive":D(B.currentIndex,!1,!0);break;case"minWidth":S()}"displayed"!==e&&"expand"!==e&&"animation"!==e||angular.isNumber(B.options.minWidth)||S()}function g(e){var n;B.options.autoplay&&(n=angular.isNumber(e)?"stop":"play",B[n]()),angular.isNumber(e)&&(e>B.slides.length-1&&(B.options.sync=B.slides.length-1),0>e&&(B.options.sync=0),T(),D(Math.floor(B.options.sync/B.options.perSlide),!1,!1))}function m(){var e="horizontal"===B.options.direction?"vertical":"horizontal";B.kaarousel.classList.remove("direction-"+e),B.kaarousel.classList.add("direction-"+B.options.direction),B.isHorizontal="horizontal"===B.options.direction,S()}function h(e,n){B.options=_.merge({},B.defaultOptions,y(p())),e?(B.options[e]=n,B.options=y(B.options),f(e,B.options[e])):(B.options=y(B.options),O()),b()}function y(e){if(e.displayed<1&&(e.displayed=1),e.minWidth){var n=B.kaarouselSliderContainer.offsetWidth,i=Math.floor(n/e.minWidth);i<e.displayed&&(e.displayed=i),e.displayed<1&&(e.displayed=1)}return(!e.perSlide||e.perSlide>e.displayed)&&(e.perSlide=e.displayed),e.expand&&B.slides.length<e.displayed&&(e.displayed=B.slides.length),e.animation===G[1]&&e.perSlide!==e.displayed&&(e.perSlide=e.displayed),e}function k(e,n){var i=100/B.options.displayed,t=n%B.options.displayed;e.element.css(B.isHorizontal?"height":"width",""),e.element.css(B.isHorizontal?"width":"height",i+"%"),e.element.css(B.isHorizontal?"top":"left",""),e.element.css(B.isHorizontal?"left":"top","slide"===B.options.animation?"":t*i+"%")}function S(e){return angular.isDefined(e)&&"slide"===B.options.animation?void k(B.slides[e],e):(o.cancel(B.dimensionsTimeout),void(B.dimensionsTimeout=o(function(){_.forEach(B.slides,function(e,n){k(e,n)}),D(B.currentIndex,!1,!0)},200)))}function b(){B.navigation||(B.navigation={}),B.navigation.prev||(B.navigation.prev={}),B.navigation.next||(B.navigation.next={}),B.state||(B.state={}),B.pager||(B.pager={});var e=B.slides.length>B.options.displayed;B.state.animating=!0,B.state.dragging=!1,B.navigation.visible=e&&(!B.options.hideNav||B.isHovering&&B.options.navOnHover),B.navigation.prev.visible=!x("prev"),B.navigation.next.visible=!x("next"),B.pager.visible=e&&(!B.options.hidePager||B.isHovering&&B.options.pagerOnHover)}function x(e){if(B.options.loop)return!1;var n;switch(e){case"prev":n=B.currentIndex<B.options.displayed;break;case"next":n=B.currentIndex>B.slides.length-B.options.displayed}return n}function w(){_.forEach(i,function(n,i){var t;B.defaultOptions.hasOwnProperty(i)&&e.$watch(i,function(e,n){o.cancel(t),t=o(function(){e!==n&&h(i,e)},150)})}),a.addEventListener("resize",_.debounce(A,500)),a.addEventListener("resize",function(){B.isPlaying&&C()}),B.kaarouselWrapper.addEventListener("mouseenter",function(){o(function(){B.isHovering=!0,b(),B.options.pauseOnHover&&C()})}),B.kaarouselSlider.addEventListener("mouseleave",function(){B.state.swipable&&B.kaarouselSlider.dispatchEvent(new Event("touchend"))}),B.kaarouselWrapper.addEventListener("mouseleave",function(){o(function(){B.isHovering=!1,b(),B.options.autoplay&&!B.isPlaying&&R()})}),e.$on("$destroy",function(){B.isPlaying&&t.cancel(B.interval),angular.element(B.kaarouselSlider).unbind("mousedown mousemove mouseup touchstart touchmove touchend touchcancel")})}function A(){B.options.minWidth&&h(),B.move(B.currentIndex,!1,!0),B.options.autoplay&&!B.stoppedAfterAction&&R()}function H(e,n){var i={element:e,index:n};e[0].classList.add("kaarousel-slide"),B.slides||(B.slides=[]),B.slides[n]?(B.slides.splice(n,0,i),S(n),o(function(){D(B.currentIndex,null,!0)},150)):B.slides[n]=i}function P(e){B.slides.splice(e,1),o(function(){D(B.currentIndex,null,!0)},150)}function O(){B.currentIndex=0,B.currentPage=0,S(),m(),U(),v(B.options.animation),B.options.autoplay&&!angular.isNumber(B.options.sync)&&R(),B.options.swipable&&Y(!0),angular.isNumber(B.options.sync)&&g(B.options.sync)}function I(e){var n,i,t=B.currentIndex;return angular.isNumber(e)?t=e:(n=e?1:-1,i=B.slides.length-1,t+=B.options.perSlide*n,t>i&&(t=0),0>t&&(t=Math.ceil(B.slides.length/B.options.perSlide)*B.options.perSlide-B.options.perSlide)),t}function $(e){D(e*B.options.perSlide,!0)}function E(e){var n=B.options.displayed/2;return parseInt(n)!==n&&B.options.centerActive&&W()>=e.down&&W()<e.up?Math.floor(n):0}function L(){var e=Math.floor(B.options.displayed/2);return{down:B.options.centerActive?e+1:0,up:B.options.centerActive?B.slides.length-e:B.slides.length-B.options.displayed}}function z(){var e,n=W(),i=L();return i.up<0&&(i.up=B.slides.length),n<i.down&&(e=n<i.down?0:n),n>=i.down&&(e=n<i.up?n:B.slides.length-B.options.displayed),e-=E(i),B.slides[e].element[0]}function N(e){if("slide"===B.options.animation){var n=z()[B.isHorizontal?"offsetLeft":"offsetTop"],i=B.isHorizontal?"translateX":"translateY",t=-(n+(e||0))+"px";angular.element(B.kaarouselSlider).css({transform:i+"("+t+")",height:"",width:""})}else{var a;"horizontal"===B.options.direction?(a=_.max(_.where(B.slides,{visible:!0}),function(e){return e.element[0].offsetHeight}).element[0].offsetHeight,angular.element(B.kaarouselSlider).css({height:a+"px",transform:"",width:""})):(a=_.max(_.where(B.slides,{visible:!0}),function(e){return e.element[0].offsetWidth}).element[0].offsetWidth,angular.element(B.kaarouselSlider).css({width:a+"px",transform:"",height:""}))}}function W(){return angular.isNumber(B.options.sync)?B.options.sync:B.currentIndex}function D(e,n,i){B.options.beforeSlide&&B.options.beforeSlide()(),B.currentIndex=i?W():I(e),B.currentPage=Math.floor(W()/B.options.perSlide),T(),M(),N(),b(),B.currentIndex>B.slides.length-B.options.displayed&&!B.options.loop&&C(),n&&B.isPlaying&&(C(!B.options.stopAfterAction),B.options.stopAfterAction&&(B.stoppedAfterAction=!0)),B.options.afterSlide&&o(function(){B.options.afterSlide()()},B.options.transitionDuration)}function M(){_.forEach(B.slides,function(e,n){var i,t=B.slides.length-B.options.displayed,a=E(L());if("slide"!==B.options.animation)i=n>=B.currentPage*B.options.displayed&&n<(B.currentPage+1)*B.options.displayed;else{var o=W()>t&&n>=t,s=W()-a;i=n>=s&&n<s+B.options.displayed||o}e.visible=i,e.element[0].classList[i?"add":"remove"]("visible")})}function T(){var e=_.where(B.slides,{active:!0});e.length&&(e[0].active=!1,e[0].element[0].classList.remove("active"));var n=angular.isNumber(B.options.sync)?B.options.sync:B.currentIndex;B.slides[n].element[0].classList.add("active"),B.slides[n].active=!0}function R(){B.isPlaying||(t.cancel(B.interval),B.isPlaying=!0,B.interval=t(function(){D(!0)},B.options.timeInterval))}function C(e){B.isPlaying&&(B.isPlaying=!1,t.cancel(B.interval),e&&o(R,B.options.transitionDuration))}function q(){return B.options.swipable&&B.slides.length>B.options.displayed}function U(){B.state.animating=!0,angular.element(B.kaarouselSlider).css("transition-duration",B.options.transitionDuration/1e3+"s")}function X(){B.state.animating=!1,angular.element(B.kaarouselSlider).css("transition-duration","")}function j(e,n){B.kaarouselSliderContainer.classList.add("dragging");var i,t="horizontal"===B.options.direction?"x":"y";B.state.dragging=!0,i=e[t]-n[t],N(i)}function K(){B.kaarouselSliderContainer.classList.remove("dragging"),B.state.animating=!0,B.state.dragging=!1,U()}function V(e,n){var i="horizontal"===B.options.direction?"x":"y";return e&&n&&Math.abs(e[i]-n[i])>B.options.swipeThreshold}function Y(e){if(B.state.swipable=e,!B.swipeReady){var n,i;B.swipeReady=!0,s.bind(angular.element(B.kaarouselSlider),{start:function(e){q()&&(X(),i=e,n=null)},move:function(e){q()&&(n=e,j(i,n))},end:function(){if(K(),q()&&n){var e=i.x-n.x;V(i,n)?e>0?D(!0,!0,!1):D(!1,!0,!1):D(B.currentIndex,!0,!0)}},cancel:function(){q()&&(K(),D(B.currentIndex,!0,!0))}})}}var B=this,F=["autoplay","pauseOnHover","centerActive","stopAfterAction","hideNav","hidePager","navOnHover","pagerOnHover","swipable","loop","expand"],G=["slide","fade"];B.init=r,B.register=H,B.removeSlide=P,B.move=D,B.play=R,B.stop=C,B.movePage=$,B.getPages=l,B.defaultOptions={displayed:3,perSlide:1,autoplay:!0,direction:"horizontal",pauseOnHover:!0,centerActive:!1,timeInterval:3e3,transitionDuration:500,stopAfterAction:!1,hideNav:!1,hidePager:!1,navOnHover:!1,pagerOnHover:!1,swipable:!0,sync:null,animation:"slide",loop:!0,afterSlide:null,beforeSlide:null,minWidth:null,expand:!0,swipeThreshold:100},B.state={}}angular.module("angular-kaarousel",["ngTouch"]).directive("kaarousel",e),n.$inject=["$scope","$element","$attrs","$interval","$window","$timeout","$swipe"]}(),function(){"use strict";function e(){function e(e,n,i,t){t.register(n,e.$index),e.$last&&!t.ready&&t.init(),e.$on("$destroy",function(){t.removeSlide(e.$index)})}var n={restrict:"EA",require:"^kaarousel",link:e};return n}angular.module("angular-kaarousel").directive("kaarouselSlide",e)}(),angular.module("angularKaarousel").run(["$templateCache",function(e){e.put("app/components/kaarousel/templates/angular-kaarousel.html",'<kaarousel-wrapper><kaarousel-slider-container><kaarousel-slider ng-transclude="" class="kaarousel-slider"></kaarousel-slider></kaarousel-slider-container><kaarousel-nav ng-class="{\'is-hidden\': !kc.navigation.visible}"><kaarousel-prev ng-click="kc.move(null, true)" ng-class="{\'is-hidden\': !kc.navigation.prev.visible}">PREV</kaarousel-prev><kaarousel-next ng-click="kc.move(true, true)" ng-class="{\'is-hidden\': !kc.navigation.next.visible}">NEXT</kaarousel-next></kaarousel-nav><kaarousel-pager ng-class="{\'is-hidden\': !kc.pager.visible}"><ul><li ng-repeat="i in kc.getPages() track by $index" ng-click="kc.movePage($index)" ng-class="{selected: $index === kc.currentPage}">{{$index}}</li></ul></kaarousel-pager></kaarousel-wrapper>')}]);