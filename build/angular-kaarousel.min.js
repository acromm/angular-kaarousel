!function(){"use strict";function e(){var e={restrict:"EA",scope:{displayed:"=?",perSlide:"=?",autoplay:"=?",direction:"=?",pauseOnHover:"=?",centerActive:"=?",timeInterval:"=?",transitionDuration:"=?",updateRate:"=?",stopAfterAction:"=?",hideNav:"=?",hidePager:"=?",navOnHover:"=?",pagerOnHover:"=?",swipable:"=?",sync:"=?",data:"=?",animation:"=?",loop:"=?",options:"=?",afterSlide:"&?",beforeSlide:"&?",minWidth:"=?",expand:"=?"},templateUrl:"app/components/kaarousel/templates/angular-kaarousel.html",transclude:!0,controller:n,controllerAs:"kc"};return e}function n(e,n,i,t,o,a,s){function r(){d(),u(),h(),S(),k(),X.ready=!0}function l(){return X.slides&&X.options&&X.options.perSlide?new Array(Math.ceil(X.slides.length/X.options.perSlide)):void 0}function d(){X.kaarousel=n[0],X.kaarouselSliderContainer=n[0].querySelector("kaarousel-slider-container"),X.kaarouselWrapper=n[0].querySelector("kaarousel-wrapper"),X.kaarouselSlider=n[0].querySelector("kaarousel-slider")}function u(){X.kaarousel.classList.add("kaarousel")}function p(){if(!_.isEmpty(e.options))return e.options;var n={displayed:e.displayed,perSlide:e.perSlide,autoplay:e.autoplay,direction:e.direction,pauseOnHover:e.pauseOnHover,centerActive:e.centerActive,timeInterval:e.timeInterval,transitionDuration:e.transitionDuration,updateRate:e.updateRate,stopAfterAction:e.stopAfterAction,hideNav:e.hideNav,hidePager:e.hidePager,navOnHover:e.navOnHover,pagerOnHover:e.pagerOnHover,swipable:e.swipable,sync:e.sync,animation:e.animation,loop:e.loop,options:e.options,afterSlide:e.afterSlide,beforeSlide:e.beforeSlide,minWidth:e.minWidth,expand:e.expand||!0};return n=c(n)}function c(e){return _.forEach(e,function(n,t){i.hasOwnProperty(t)&&angular.isUndefined(n)&&(e[t]=!0)}),e}function v(e,n){var i;"displayed"!==e&&"expand"!==e||angular.isNumber(X.options.minWidth)||y(),"direction"===e&&f(),"autoplay"===e&&(i=n?"play":"stop",X[i]()),"swipable"===e&&U(n),"loop"===e&&n&&!X.isPlaying&&X.options.autoplay&&N(),"transitionDuration"===e&&M(),"sync"===e&&g(n),"centerActive"===e&&E(X.currentIndex,!1,!0),"minWidth"===e&&y()}function g(e){var n;X.options.autoplay&&(n=angular.isNumber(e)?"stop":"play",X[n]()),angular.isNumber(e)&&(e>X.slides.length-1&&(X.options.sync=X.slides.length-1),0>e&&(X.options.sync=0),L(),E(Math.floor(X.options.sync/X.options.perSlide),!1,!1))}function f(){var e="horizontal"===X.options.direction?"vertical":"horizontal";X.kaarousel.classList.remove("direction-"+e),X.kaarousel.classList.add("direction-"+X.options.direction),X.isHorizontal="horizontal"===X.options.direction,y()}function h(e,n){X.options=_.merge({},X.defaultOptions,m(p())),e?(X.options[e]=n,X.options=m(X.options),v(e,X.options[e])):(X.options=m(X.options),H()),k()}function m(e){if(e.displayed<1&&(e.displayed=1),e.minWidth){var n=X.kaarouselSliderContainer.offsetWidth;e.displayed=Math.floor(n/e.minWidth),e.displayed<1&&(e.displayed=1)}return(!e.perSlide||e.perSlide>e.displayed)&&(e.perSlide=e.displayed),e.expand&&X.slides.length<e.displayed&&(e.displayed=X.slides.length),e}function y(e){return angular.isDefined(e)?(X.slides[e].element.css(X.isHorizontal?"height":"width",""),void X.slides[e].element.css(X.isHorizontal?"width":"height",100/X.options.displayed+"%")):(a.cancel(X.dimensionsTimeout),void(X.dimensionsTimeout=a(function(){_.forEach(X.slides,function(e){e.element.css(X.isHorizontal?"height":"width",""),e.element.css(X.isHorizontal?"width":"height",100/X.options.displayed+"%")}),E(X.currentIndex,!1,!0)},200)))}function k(){X.navigation||(X.navigation={}),X.navigation.prev||(X.navigation.prev={}),X.navigation.next||(X.navigation.next={}),X.state||(X.state={}),X.pager||(X.pager={});var e=X.slides.length>X.options.displayed;X.state.animating=!0,X.state.dragging=!1,X.navigation.visible=e&&(!X.options.hideNav||X.isHovering&&X.options.navOnHover),X.navigation.prev.visible=!x("prev"),X.navigation.next.visible=!x("next"),X.pager.visible=e&&(!X.options.hidePager||X.isHovering&&X.options.pagerOnHover)}function x(e){if(X.options.loop)return!1;var n;switch(e){case"prev":n=X.currentIndex<X.options.displayed;break;case"next":n=X.currentIndex>X.slides.length-X.options.displayed}return n}function S(){_.forEach(i,function(n,i){var t;X.defaultOptions.hasOwnProperty(i)&&e.$watch(i,function(e,n){a.cancel(t),t=a(function(){e!==n&&h(i,e)},150)})}),o.addEventListener("resize",_.debounce(b,500)),o.addEventListener("resize",function(){X.isPlaying&&W()}),X.kaarouselWrapper.addEventListener("mouseenter",function(){a(function(){X.isHovering=!0,k(),X.options.pauseOnHover&&W()})}),X.kaarouselSlider.addEventListener("mouseleave",function(){X.state.swipable&&X.kaarouselSlider.dispatchEvent(new Event("touchend"))}),X.kaarouselWrapper.addEventListener("mouseleave",function(){a(function(){X.isHovering=!1,k(),X.options.autoplay&&!X.isPlaying&&N()})}),e.$on("$destroy",function(){X.isPlaying&&t.cancel(X.interval),angular.element(X.kaarouselSlider).unbind("mousedown mousemove mouseup touchstart touchmove touchend touchcancel")})}function b(){X.options.minWidth&&h(),X.move(X.currentIndex,!1,!0),X.options.autoplay&&!X.stoppedAfterAction&&N()}function w(e,n){var i={element:e,index:n};e[0].classList.add("kaarousel-slide"),X.slides||(X.slides=[]),X.slides[n]?(X.slides.splice(n,0,i),y(n),a(function(){E(X.currentIndex,null,!0)},150)):X.slides[n]=i}function A(e){X.slides.splice(e,1),a(function(){E(X.currentIndex,null,!0)},150)}function H(){X.currentIndex=0,X.currentPage=0,y(),f(),M(),X.options.autoplay&&!angular.isNumber(X.options.sync)&&N(),X.options.swipable&&U(!0),angular.isNumber(X.options.sync)&&g(X.options.sync)}function I(e){var n,i,t=X.currentIndex;return angular.isNumber(e)?t=e:(n=e?1:-1,i=X.slides.length-1,t+=X.options.perSlide*n,t>i&&(t=0),0>t&&(t=Math.ceil(X.slides.length/X.options.perSlide)*X.options.perSlide-X.options.perSlide)),t}function P(e){E(e*X.options.perSlide,!0)}function $(){var e,n=X.options.sync&&angular.isNumber(X.options.sync)?X.options.sync:X.currentIndex,i=Math.floor(X.options.displayed/2),t={down:X.options.centerActive?i+1:0,up:X.options.centerActive?X.slides.length-i:X.slides.length-X.options.displayed};return t.up<0&&(t.up=X.slides.length),n<t.down&&(e=n<t.down?0:n),n>=t.down&&(e=n<t.up?n:X.slides.length-X.options.displayed),i%2!==1&&X.options.centerActive&&n>=t.down&&n<t.up&&(e-=i),X.slides[e].element[0]}function O(e){if("slide"===X.options.animation){var n=$()[X.isHorizontal?"offsetLeft":"offsetTop"],i=X.isHorizontal?"translateX":"translateY",t=-(n+(e||0))+"px";angular.element(X.kaarouselSlider).css({transform:i+"("+t+")"})}}function E(e,n,i){X.options.beforeSlide&&X.options.beforeSlide()(),X.currentIndex=i?X.currentIndex:I(e),X.currentPage=Math.floor(X.currentIndex/X.options.perSlide),O(),L(),z(),k(),X.currentIndex>X.slides.length-X.options.displayed&&!X.options.loop&&W(),n&&X.isPlaying&&(W(!X.options.stopAfterAction),X.options.stopAfterAction&&(X.stoppedAfterAction=!0)),X.options.afterSlide&&a(function(){X.options.afterSlide()()},X.options.transitionDuration)}function z(){_.forEach(X.slides,function(e,n){var i=X.slides.length-X.options.displayed,t=X.currentIndex>i&&n>=i,o=n>=X.currentIndex&&n<X.currentIndex+X.options.displayed||t;e.visible=o,e.element[0].classList[o?"add":"remove"]("visible")})}function L(){var e=_.where(X.slides,{active:!0});e.length&&(e[0].active=!1,e[0].element[0].classList.remove("active"));var n=X.options.sync&&angular.isNumber(X.options.sync)?X.options.sync:X.currentIndex;X.slides[n].element[0].classList.add("active"),X.slides[n].active=!0}function N(){X.isPlaying||(t.cancel(X.interval),X.isPlaying=!0,X.interval=t(function(){E(!0)},X.options.timeInterval))}function W(e){X.isPlaying&&(X.isPlaying=!1,t.cancel(X.interval),e&&a(N,X.options.transitionDuration))}function D(){return X.options.swipable&&X.slides.length>X.options.displayed}function M(){X.state.animating=!0,angular.element(X.kaarouselSlider).css("transition-duration",X.options.transitionDuration/1e3+"s")}function T(){X.state.animating=!1,angular.element(X.kaarouselSlider).css("transition-duration","")}function R(e,n){X.kaarouselSliderContainer.classList.add("dragging");var i,t="horizontal"===X.options.direction?"x":"y";X.state.dragging=!0,i=e[t]-n[t],O(i)}function C(){X.kaarouselSliderContainer.classList.remove("dragging"),X.state.animating=!0,X.state.dragging=!1,M()}function q(e,n){var i="horizontal"===X.options.direction?"x":"y";return e&&n&&Math.abs(e[i]-n[i])>X.options.swipeThreshold}function U(e){if(X.state.swipable=e,!X.swipeReady){var n,i;X.swipeReady=!0,s.bind(angular.element(X.kaarouselSlider),{start:function(e){D()&&(T(),i=e,n=null)},move:function(e){D()&&(n=e,R(i,n))},end:function(){if(D()&&n){C();var e=i.x-n.x;q(i,n)?e>0?E(!0,!0,!1):E(!1,!0,!1):E(X.currentIndex,!0,!0)}},cancel:function(){D()&&(C(),E(X.currentIndex,!0,!0))}})}}var X=this;X.init=r,X.register=w,X.removeSlide=A,X.getPages=l,X.move=E,X.play=N,X.stop=W,X.movePage=P,X.defaultOptions={displayed:3,perSlide:1,autoplay:!0,direction:"horizontal",pauseOnHover:!0,centerActive:!1,timeInterval:3e3,transitionDuration:500,stopAfterAction:!1,hideNav:!1,hidePager:!1,navOnHover:!1,pagerOnHover:!1,swipable:!0,sync:null,animation:"slide",loop:!0,afterSlide:null,beforeSlide:null,minWidth:null,expand:!0,swipeThreshold:100},X.state={}}angular.module("angular-kaarousel",["ngTouch"]).directive("kaarousel",e),n.$inject=["$scope","$element","$attrs","$interval","$window","$timeout","$swipe"]}(),function(){"use strict";function e(){function e(e,n,i,t){t.register(n,e.$index),e.$last&&!t.ready&&t.init(),e.$on("$destroy",function(){t.removeSlide(e.$index)})}var n={restrict:"EA",require:"^kaarousel",link:e};return n}angular.module("angular-kaarousel").directive("kaarouselSlide",e)}(),angular.module("angularKaarousel").run(["$templateCache",function(e){e.put("app/components/kaarousel/templates/angular-kaarousel.html",'<kaarousel-wrapper><kaarousel-slider-container><kaarousel-slider ng-transclude="" class="kaarousel-slider"></kaarousel-slider></kaarousel-slider-container><kaarousel-nav ng-class="{\'is-hidden\': !kc.navigation.visible}"><kaarousel-prev ng-click="kc.move(null, true)" ng-class="{\'is-hidden\': !kc.navigation.prev.visible}">PREV</kaarousel-prev><kaarousel-next ng-click="kc.move(true, true)" ng-class="{\'is-hidden\': !kc.navigation.next.visible}">NEXT</kaarousel-next></kaarousel-nav><kaarousel-pager ng-class="{\'is-hidden\': !kc.pager.visible}"><ul><li ng-repeat="i in kc.getPages() track by $index" ng-click="kc.movePage($index)" ng-class="{selected: $index === kc.currentPage}">{{$index}}</li></ul></kaarousel-pager></kaarousel-wrapper>')}]);